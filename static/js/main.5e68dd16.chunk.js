(this.webpackJsonpfyrechat=this.webpackJsonpfyrechat||[]).push([[0],{53:function(e,t,a){},55:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var s=a(9),n=a.n(s),c=a(43),r=a.n(c),i=(a(53),a(39)),o=a(13),u=a(0),h=a.n(u),l=a(2),b=a(1),j=a(3),d=a(24),m=a(7),p=a(8),O=(a(55),a(10)),g=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).auth=e.auth,s}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.message,t=e.text,a=e.userId,s=e.name,n=e.profilePhoto,c=a===this.auth.currentUser.uid?"sent":"recieved";return Object(O.jsxs)("div",{className:"message-box my-3 ".concat(c),children:[Object(O.jsx)("img",{src:n,className:"profile-photo mx-3",alt:s}),Object(O.jsxs)("div",{className:"text-message",children:[Object(O.jsx)("p",{className:"name",children:s}),Object(O.jsx)("p",{className:"text",children:t})]})]})}}]),a}(s.Component),f=a(27),x=a(26),v=(a(58),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var s;return Object(b.a)(this,a),(s=t.call(this,e)).auth=e.auth,s.db=e.db,s.logout=s.logout.bind(Object(d.a)(s)),s.sendMessage=s.sendMessage.bind(Object(d.a)(s)),s.handleMessageInputOnChange=s.handleMessageInputOnChange.bind(Object(d.a)(s)),s.ref={message:null,chatbox:null},s.state={messageInput:"",messages:[]},s}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getMessages(),this.scrollDown()}},{key:"getMessages",value:function(){var e=Object(l.a)(h.a.mark((function e(){var t,a,s,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(x.c)(this.db,"messages"),a=Object(x.h)(t,Object(x.g)("createdAt","asc"),Object(x.f)(25)),e.next=4,Object(x.d)(a);case 4:s=e.sent,n=s.docs.map((function(e){return e.data()})),this.setState({messages:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=Object(l.a)(h.a.mark((function e(t){var a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=Object(x.c)(this.db,"messages"),s={userId:this.auth.currentUser.uid,text:this.ref.message.value,name:this.auth.currentUser.displayName,profilePhoto:this.auth.currentUser.photoURL,createdAt:x.a.now()},e.next=5,Object(x.b)(a,s);case 5:return e.next=7,this.getMessages();case 7:this.scrollDown(),this.setState({messageInput:""});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scrollDown",value:function(){this.ref.chatbox.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}},{key:"handleMessageInputOnChange",value:function(e){var t=e.target.value;this.setState({messageInput:t})}},{key:"logout",value:function(){Object(f.d)(this.auth)}},{key:"render",value:function(){var e=this,t=this.state,a=t.messages,s=t.messageInput,n=a&&a.map((function(t,a){return Object(O.jsx)(g,{message:t,auth:e.auth},a)}));return Object(O.jsx)("section",{className:"p-4 h-100",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col-12 header",children:[Object(O.jsx)("h1",{className:"float-start",children:"Chat Room"}),Object(O.jsx)("button",{className:"float-end btn btn-secondary",onClick:this.logout,children:"Sign Out"})]}),Object(O.jsx)("div",{className:"col-12 chat",ref:function(t){return e.ref.chatbox=t},children:n}),Object(O.jsx)("div",{className:"col-12 message-input",children:Object(O.jsxs)("form",{className:"row g-2",onSubmit:this.sendMessage,children:[Object(O.jsxs)("div",{className:"col-11",children:[Object(O.jsx)("label",{htmlFor:"message",className:"visually-hidden",children:"Message"}),Object(O.jsx)("input",{type:"text",className:"form-control",id:"message",placeholder:"Enter you message...",value:s,onChange:this.handleMessageInputOnChange,ref:function(t){return e.ref.message=t}})]}),Object(O.jsx)("div",{className:"col-1",children:Object(O.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"Send"})})]})})]})})})}}]),a}(s.Component));a(59);function N(e){var t=e.auth;return Object(O.jsx)("div",{className:"sign-in text-center",children:Object(O.jsxs)("div",{className:"box",children:[Object(O.jsx)("img",{className:"logo mb-3",src:"/chat-app-firebase/firechat2.jpeg",alt:"FyreChat"}),Object(O.jsx)("button",{className:"btn btn-secondary",onClick:function(){var e=new f.a;Object(f.c)(t,e)},children:"Sign In With Google"})]})})}var y=a(44),k=a(46),I=a(14),w=a(45),C=Object(y.a)({apiKey:"AIzaSyAEBVkCPzvl2-H3ElkVLLUEklgl1f-STm8",authDomain:"chat-app-4c8df.firebaseapp.com",projectId:"chat-app-4c8df",storageBucket:"chat-app-4c8df.appspot.com",messagingSenderId:"220779545878",appId:"1:220779545878:web:fa6a6b2a9e2057857ebc37"}),M=Object(f.b)(C),S=Object(x.e)(C);var D=function(){var e=Object(w.a)(M),t=Object(o.a)(e,1)[0],a={auth:M,db:S};return Object(O.jsx)(k.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(I.b,{exact:!0,path:"/chat-app-firebase",children:t?Object(O.jsx)(I.a,{to:"/chat-app-firebase/chat-room"}):Object(O.jsx)(N,Object(i.a)({},a))}),Object(O.jsx)(I.b,{exact:!0,path:"/chat-app-firebase/chat-room",children:t?Object(O.jsx)(v,Object(i.a)({},a)):Object(O.jsx)(I.a,{to:"/chat-app-firebase"})})]})})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,65)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(D,{})}),document.getElementById("root")),E()}},[[64,1,2]]]);
//# sourceMappingURL=main.5e68dd16.chunk.js.map